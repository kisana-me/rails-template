<% provide(:title, "アカウント設定") %>

<h1>アカウント設定</h1>

<%= form_with(model: @account, url: settings_account_path, method: :patch, class: "ctmf", data: { turbo: false }) do |form| %>
  <%= render "shared/error_messages", instead: @account %>

  <div>
    <%= form.label :icon_file %>
    <%= form.file_field :icon_file %>
  </div>

  <div>
    <%= form.label :name %>
    <%= form.text_field :name %>
  </div>

  <div>
    <%= form.label :name_id %>
    <%= form.text_field :name_id %>
  </div>

  <div>
    <%= form.label :description %>
    <%= form.text_area :description %>
  </div>

  <div>
    <%= form.label :birthdate %>
    <%= form.datetime_field :birthdate %>
  </div>

  <div>
    <%= form.label :visibility %>
    <%= form.select :visibility, Account.visibilities.keys.map { |k| [t("activerecord.enums.account.visibility.#{k}"), k] }, {} %>
  </div>

  <div>
    <%= form.submit "更新" %>
  </div>
<% end %>

<br />
<br />
現在のサブスクリプション: <%= I18n.t("general.subscription.status.#{@current_account.subscription_plan}") %>
<br />
<br />
<%= button_to "ANYURと連携", oauth_start_path, method: :post, params: { provider: "anyur" }, data: { turbo: false }, class: "pages-link-button" %>
<br />
<%= button_to "ANYURの情報を更新", oauth_fetch_path, method: :post, params: { provider: "anyur" }, data: { turbo: false }, class: "pages-link-button" %>
<br />
<br />
<br />
<%= button_to "アカウントを削除", settings_leave_path, method: :delete, class: "custom-delete-button" %>
